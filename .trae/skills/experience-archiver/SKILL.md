---
name: experience-archiver
description: 用于归纳开发经验、错误复盘或关键决策，并将其更新到 project_rules.md。当用户需要“记录经验”、“总结错误”、“更新规则”时使用。
---

# 核心流程

1. **分析上下文**
   - 回顾最近的对话，识别以下内容：
     - **持续出现的错误**：多次尝试才解决的问题。
     - **非直观逻辑**：容易被忽视的隐式依赖或特殊配置。
     - **关键技术决策**：选型理由、架构约束。

2. **提炼经验 (Rule Extraction)**
   - 将识别到的内容转化为**通用规则**或**经验教训**。
   - 格式要求：
     - **简洁**：一句话概括核心。
     - **可执行**：明确说明“应该做什么”或“禁止做什么”。
     - **分类**：确定属于 `代码规范`、`技术栈`、`部署` 还是 `通用经验`。

3. **读取规则文件**
   - 读取 `c:\Users\DJCHAN\SE\2_GithubProject\OtterHub\.trae\rules\project_rules.md`。

4. **更新规则文件**
   - 检查现有规则，避免重复。
   - 如果是新类别，创建新标题。
   - 将新规则追加到合适的位置（通常在文件末尾或对应章节）。
   - **格式**：使用 Markdown 列表项。
     - 例如：`* **[类别]**: 规则内容`

5. **(可选) 更新 Core Memory**
   - 如果经验具有全局指导意义，调用 `manage_core_memory` 存入 `project_scope`。

# 关键规则

- **禁止废话**：只记录干货，不记录具体代码片段（除非是简短的配置范例）。
- **去重**：如果规则已存在，不要重复添加。
- **原子性**：一条规则只讲一件事。
- **正向表述**：优先使用“应当...”、“必须...”，少用“不要...”（除非是明确的禁令）。
